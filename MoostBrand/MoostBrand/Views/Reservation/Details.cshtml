@model MoostBrand.DAL.Requisition

@{
    ViewBag.Title = "Details";
}

<div class="panel-heading">
    <h4 class="panel-title">Requisition Details</h4>
    <hr />
</div>
<div class="panel-body">
    <div class="form-horizontal">
        @Html.HiddenFor(model => model.RequisitionTypeID)
        <div class="form-group">
            <label class="control-label col-md-2">Reference #</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.RefNumber)
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Type</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.RequisitionType.Type)
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Requested Date</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.RequestedDate)
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Requested By</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.Employee1.LastName),
                    @Html.DisplayFor(model => model.Employee1.FirstName)
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Location</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.Location.Description)
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Date Required</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.DateRequired)
                </label>
            </div>
        </div>
        <div id="cr">
            <div class="form-group">
                <label class="control-label col-md-2">Project/Customer</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.Customer)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Reservation Type</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.ReservationType.Type)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Reserved By</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.Employee2.LastName),
                        @Html.DisplayFor(model => model.Employee2.FirstName)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Payment Status</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.PaymentStatus)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Invoice #</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.InvoiceNumber)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Authorized Person</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.AuthorizedPerson)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Validated By</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.Employee3.LastName),
                        @Html.DisplayFor(model => model.Employee3.FirstName)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Shipment Type</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.ShipmentType)
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label class="control-label col-md-2">Drop Ship Type</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.DropShipType.Type)
                    </label>
                </div>
            </div>
        </div>


        <div id="brcr">
            <div class="form-group">
                <label class="control-label col-md-2">Driver</label>
                <div class="col-md-6">
                    <label class="custom-label">
                        @Html.DisplayFor(model => model.Driver)
                    </label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Approval Status</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.ApprovalStatu.Status)
                </label>
            </div>
        </div>

        <div class="form-group">
            <label class="control-label col-md-2">Approved By</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.Employee.LastName),
                    @Html.DisplayFor(model => model.Employee.FirstName)
                </label>
            </div>
        </div>
        <div class="form-group">
            <label class="control-label col-md-2">Remarks</label>
            <div class="col-md-6">
                <label class="custom-label">
                    @Html.DisplayFor(model => model.Remarks)
                </label>
            </div>
        </div>


        <div class="form-group">
            <div class="col-md-offset-2 col-md-6">
                @if (Convert.ToInt32(Session["sessionuid"]) == Model.RequestedBy || Convert.ToInt32(Session["usertype"]) == 1 || Convert.ToInt32(Session["usertype"]) == 4)
                {
                    @*<a href='@Url.Action("PendingItems", new { id = Model.ID })' class="btn btn-dark-yellow">
                        Pending Items
                    </a>*@
                    <a href='@Url.Action("ApprovedItems", new { id = Model.ID })' class="btn btn-dark-green">
                        Approved Items
                    </a>
                    <a href='@Url.Action("DeniedItems", new { id = Model.ID })' class="btn btn-dark-red">
                        Denied Items
                    </a>

                    <br /><br />

                    <a href='@Url.Action("Edit", new { id = Model.ID })' class="btn btn-green">
                        Edit
                    </a>
                }

                <a href='@Url.Action("Index")' class="btn btn-light-orange">
                    Back to List
                </a>
            </div>
        </div>


        @if (Convert.ToInt32(Session["sessionuid"]) == Model.RequestedBy || Convert.ToInt32(Session["usertype"]) == 1 || Convert.ToInt32(Session["usertype"]) == 4)
        {
            @Html.Action("PendingItems", "Reservation")
        }

        @*@Html.Action("ViewHistoryPartial", "PR")*@
        <div class="panel-heading">
            <h4 class="panel-title">History</h4>
            <hr />
        </div>
        <table class="table table-striped table-bordered table-hover table-full-width dataTable ">
            <thead>
                <tr>
                    <th>
                        Item Code
                    </th>
                    <th>
                        Item Name
                    </th>
                    <th>
                        Quantity
                    </th>
                    <th>
                        Remaining Balance
                    </th>
                    <th>
                        Actual Balance
                    </th>
                    <th>
                        Variance
                    </th>
                    <th>
                        Previous Item
                    </th>
                    <th>
                        Previous Quantity
                    </th>
                </tr>
            </thead>

            @foreach (var item in Model.RequisitionDetails)
            {
                <tbody>
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Item.Code)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Quantity)
                        </td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Item1.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.PreviousQuantity)
                        </td>
                    </tr>
                </tbody>
            }
        </table>


    </div>
</div>


