@model PagedList.IPagedList<MoostBrand.DAL.RequisitionDetail>
@using PagedList.Mvc;
<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

@{
    ViewBag.Title = "Pending Items";
}

<div class="panel-heading">
    <h4 class="panel-title">Pending Items</h4>

    <hr />

</div>
<div class="panel-body">

    <div class="alert alert-danger">@TempData["PartialError"]</div>

    <table class="table table-striped table-bordered table-hover table-full-width dataTable no-footer">
        <thead>
            <tr>
                <th>
                    Item Name
                </th>
                <th>
                    Quantity
                </th>
            </tr>
        </thead>
        <tbody>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Item.Description)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Quantity)
                    </td>
                    <td>
                        <a href="#" id="ShowPopopEdit" onclick="ShowEdit(@item.ID)">Edit</a> |
                        <a href="#" id="ShowPopopDelete" onclick="ShowDelete(@item.ID)">Delete</a>
                    </td>
                </tr>
            }
        </tbody>

    </table>

    <br />

    Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

    @Html.PagedListPager(Model, page => Url.Action("PendingItems",
    new { page, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter }))

    <br /><br />

    <a href="#" id="ShowPopop" class="btn btn-green">Add Item</a>
    <a href='@Url.Action("Details", new { id = ViewBag.PRid })' class="btn btn-light-orange">
        Back to List
    </a>


    <div id="AddItemWindow" class="modal fade" data-backdrop="static" data-keyboard="false" data-url="@Url.Action("AddItemPartial", new { id = ViewBag.PRid })">
        <div id="ShowDialogAdd" class="modal-dialog" role="document">

        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id="EditItemWindow" class="modal fade" data-backdrop="static" data-keyboard="false">
        <div id="ShowDialogEdit" class="modal-dialog" role="document">

        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id="DeleteItemWindow" class="modal fade" data-backdrop="static" data-keyboard="false">
        <div id="ShowDialogDelete" class="modal-dialog" role="document">

        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    
        
    




</div>


    <script>

        

        $('#ShowPopop').click(function () {

            var url = $('#AddItemWindow').data('url');
            $.get(url, function (data) {
                $('#ShowDialogAdd').html(data);

                $('#AddItemWindow').modal('show');

                // add class form-control to textarea and select
                $("input[disabled]").addClass("form-control");
                $("textarea").addClass("form-control");
                $("select").addClass("form-control");
            });
        });

        function ShowEdit(id) {
            var url = '@Url.Action("EditItemPartial", "PR")/' + id;
            $.get(url, function (data) {
                $('#ShowDialogEdit').html(data);

                $('#EditItemWindow').modal('show');

                // add class form-control to textarea and select
                $("input[disabled]").addClass("form-control");
                $("textarea").addClass("form-control");
                $("select").addClass("form-control");
            });
        }

        function ShowDelete(id) {
            var url = '@Url.Action("DeleteItemPartial", "PR")/' + id;
            $.get(url, function (data) {
                $('#ShowDialogDelete').html(data);

                $('#DeleteItemWindow').modal('show');

                // add class form-control to textarea and select
                $("input[disabled]").addClass("form-control");
                $("textarea").addClass("form-control");
                $("select").addClass("form-control");
            });
        }
    </script>
